<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>接駁車預約範例</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #fff8f0;
    margin: 0;
    padding: 20px;
  }

  h2 {
    text-align: center;
    color: #ff7f2a;
  }

  .step {
    display: none;
    margin-top: 20px;
    text-align: center;
  }

  .active {
    display: block;
  }

  .button-group {
    display: flex;
    justify-content: center;
    gap: 20px;
    flex-wrap: wrap;
  }

  .btn {
    background-color: #ff7f2a;
    color: white;
    padding: 15px 30px;
    font-size: 18px;
    border: none;
    border-radius: 15px;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
  }

  .btn:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
  }

  .card-group {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 20px;
    margin-top: 20px;
  }

  .card {
    background-color: white;
    border-radius: 15px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    padding: 20px;
    width: 200px;
    transition: transform 0.2s, box-shadow 0.2s;
    cursor: pointer;
  }

  .card:hover {
    transform: scale(1.03);
    box-shadow: 0 6px 20px rgba(0,0,0,0.2);
  }

  .card h3 {
    margin: 0 0 10px 0;
    color: #ff7f2a;
  }

  .card p {
    margin: 5px 0;
    color: #555;
  }

  .back-btn {
    margin-top: 20px;
    background-color: #ccc;
    color: #333;
  }

  .back-btn:hover {
    background-color: #bbb;
  }
</style>
</head>
<body>

<h2>接駁車預約範例</h2>

<!-- Step 1: 去程 / 回程 -->
<div id="step1" class="step active">
  <div class="button-group">
    <button class="btn" onclick="selectDirection('去程')">🚗 去程</button>
    <button class="btn" onclick="selectDirection('回程')">🏠 回程</button>
  </div>
</div>

<!-- Step 2: 日期 -->
<div id="step2" class="step">
  <h3 id="directionTitle"></h3>
  <div class="card-group" id="dateCards"></div>
  <button class="btn back-btn" onclick="goBack(1)">← 返回方向選擇</button>
</div>

<!-- Step 3: 站點 -->
<div id="step3" class="step">
  <h3 id="dateTitle"></h3>
  <div class="card-group" id="stationCards"></div>
  <button class="btn back-btn" onclick="goBack(2)">← 返回日期選擇</button>
</div>

<!-- Step 4: 班次 -->
<div id="step4" class="step">
  <h3 id="stationTitle"></h3>
  <div class="card-group" id="scheduleCards"></div>
  <button class="btn back-btn" onclick="goBack(3)">← 返回站點選擇</button>
</div>

<script>
  // 假資料
  const data = {
    "去程": {
      "2025-08-15": {
        "捷運站": [
          {time: "08:00", available: 5},
          {time: "09:00", available: 0},
          {time: "10:00", available: 8}
        ],
        "火車站": [
          {time: "08:30", available: 2},
          {time: "09:30", available: 4}
        ],
        "商場": [
          {time: "09:00", available: 6}
        ]
      },
      "2025-08-16": {
        "捷運站": [
          {time: "08:00", available: 3}
        ]
      }
    },
    "回程": {
      "2025-08-15": {
        "捷運站": [
          {time: "18:00", available: 5}
        ],
        "火車站": [
          {time: "18:30", available: 0}
        ],
        "商場": [
          {time: "19:00", available: 7}
        ]
      }
    }
  };

  let selectedDirection = '';
  let selectedDate = '';
  let selectedStation = '';

  function showStep(stepNum) {
    document.querySelectorAll('.step').forEach((el, idx) => {
      el.classList.remove('active');
    });
    document.getElementById('step' + stepNum).classList.add('active');
  }

  function selectDirection(direction) {
    selectedDirection = direction;
    document.getElementById('directionTitle').innerText = `選擇日期 (${direction})`;

    const dates = Object.keys(data[direction]);
    const dateCards = document.getElementById('dateCards');
    dateCards.innerHTML = '';

    dates.forEach(date => {
      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `<h3>${date}</h3><p>班次: ${Object.keys(data[direction][date]).length}</p>`;
      card.onclick = () => selectDate(date);
      dateCards.appendChild(card);
    });

    showStep(2);
  }

  function selectDate(date) {
    selectedDate = date;
    document.getElementById('dateTitle').innerText = `選擇站點 (${selectedDirection} - ${date})`;

    const stations = Object.keys(data[selectedDirection][date]);
    const stationCards = document.getElementById('stationCards');
    stationCards.innerHTML = '';

    stations.forEach(station => {
      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `<h3>${station}</h3>`;
      card.onclick = () => selectStation(station);
      stationCards.appendChild(card);
    });

    showStep(3);
  }

  function selectStation(station) {
    selectedStation = station;
    document.getElementById('stationTitle').innerText = `班次 (${selectedDirection} - ${selectedDate} - ${station})`;

    const schedules = data[selectedDirection][selectedDate][station];
    const scheduleCards = document.getElementById('scheduleCards');
    scheduleCards.innerHTML = '';

    schedules.forEach(sch => {
      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `<h3>${sch.time}</h3>
                        <p>剩餘人數: ${sch.available}</p>
                        <button class="btn" onclick="alert('預約: ${sch.time}')">立即預約</button>`;
      scheduleCards.appendChild(card);
    });

    showStep(4);
  }

  function goBack(stepNum) {
    showStep(stepNum);
  }

</script>

</body>
</html>
